{% macro testimonials_grid(testimonials, title="What People Say", columns=3) %}
<section class="py-16 bg-base-200">
  <div class="section-container">
    <h2 class="text-4xl font-bold text-python-blue text-center mb-12">{{ title }}</h2>

    <div class="grid grid-cols-1 {% if columns == 3 %}md:grid-cols-2 lg:grid-cols-3{% elif columns == 2 %}md:grid-cols-2{% endif %} gap-8">
      {% for testimonial in testimonials %}
      <div class="card bg-base-100 shadow-lg">
        <div class="card-body">
          <div class="flex items-start gap-1 mb-4">
            {% for i in range(5) %}
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 {% if i < (testimonial.rating or 5) %}text-warning fill-current{% else %}text-base-300{% endif %}" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
            </svg>
            {% endfor %}
          </div>

          <p class="text-base-content/80 italic mb-6">"{{ testimonial.quote }}"</p>

          <div class="flex items-center gap-4 mt-auto">
            {% if testimonial.avatar_url %}
            <div class="avatar">
              <div class="w-12 rounded-full">
                <img src="{{ testimonial.avatar_url }}" alt="{{ testimonial.name }}" />
              </div>
            </div>
            {% else %}
            <div class="avatar placeholder">
              <div class="bg-python-blue text-white rounded-full w-12">
                <span>{{ testimonial.name[0] }}</span>
              </div>
            </div>
            {% endif %}

            <div>
              <div class="font-semibold text-python-blue">{{ testimonial.name }}</div>
              {% if testimonial.title %}
              <div class="text-sm text-base-content/60">{{ testimonial.title }}</div>
              {% endif %}
              {% if testimonial.company %}
              <div class="text-sm text-base-content/60">{{ testimonial.company }}</div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
{% endmacro %}

{% macro testimonials_carousel(testimonials, title="Testimonials", auto_rotate=True) %}
<section class="py-16 bg-base-100">
  <div class="section-container max-w-4xl">
    <h2 class="text-4xl font-bold text-python-blue text-center mb-12">{{ title }}</h2>

    <div class="carousel w-full"{% if auto_rotate %} data-auto-rotate="true"{% endif %}>
      {% for testimonial in testimonials %}
      <div id="testimonial-{{ loop.index }}" class="carousel-item relative w-full flex-col">
        <div class="card bg-base-200 shadow-xl mx-auto max-w-3xl">
          <div class="card-body text-center">
            <div class="flex justify-center gap-1 mb-6">
              {% for i in range(5) %}
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 {% if i < (testimonial.rating or 5) %}text-warning fill-current{% else %}text-base-300{% endif %}" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
              </svg>
              {% endfor %}
            </div>

            <p class="text-xl text-base-content/80 italic mb-8">"{{ testimonial.quote }}"</p>

            <div class="flex flex-col items-center gap-2">
              {% if testimonial.avatar_url %}
              <div class="avatar">
                <div class="w-16 rounded-full">
                  <img src="{{ testimonial.avatar_url }}" alt="{{ testimonial.name }}" />
                </div>
              </div>
              {% endif %}

              <div class="font-bold text-python-blue text-lg">{{ testimonial.name }}</div>
              {% if testimonial.title %}
              <div class="text-base-content/70">{{ testimonial.title }}</div>
              {% endif %}
              {% if testimonial.company %}
              <div class="text-base-content/60">{{ testimonial.company }}</div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <div class="flex justify-center gap-2 py-6">
      {% for testimonial in testimonials %}
      <a href="#testimonial-{{ loop.index }}" class="btn btn-xs">{{ loop.index }}</a>
      {% endfor %}
    </div>
  </div>
</section>
{% endmacro %}
